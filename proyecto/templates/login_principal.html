<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/login.css">
    <title>Login Seguro - CECYTEM</title>
</head>
<body>
<div class="fondo-animado"></div>
<div class="login-container">
    <div class="logo-container">
        <div class="logo-icon">ðŸ“š</div>
    </div>
    <h2>Sistema Escolar</h2>
    <h2>CECYTEM</h2>
    <p class="subtitle">Acceso seguro al portal educativo</p>
    
    <form method="POST" action="{{ url_for('login') }}">
        <div class="input-group">
            <input type="text" name="usuario" placeholder="Usuario" required autocomplete="username" maxlength="50">
        </div>
        
        <div class="input-group">
            <input type="password" name="password" placeholder="ContraseÃ±a" required autocomplete="current-password" maxlength="100">
        </div>
        
        <button type="submit" class="btn btn-primary">Iniciar SesiÃ³n</button>
        <button type="button" class="btn btn-secondary" onclick="window.location.href='{{ url_for('recuperar') }}'">Recuperar Cuenta</button>
        
        <p class="helper-text">Ingrese sus credenciales para continuar</p>
        
    </form>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="mensajes">
        {% for category, message in messages %}
            <p class="{{ category }}">{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
</div>

<script>
    // Prevenir mÃºltiples envÃ­os del formulario
    document.querySelector('form').addEventListener('submit', function(e) {
        const submitBtn = this.querySelector('.btn-primary');
        if (submitBtn.disabled) {
            e.preventDefault();
            return false;
        }
        submitBtn.disabled = true;
        submitBtn.textContent = 'Verificando...';
        setTimeout(() => {
            submitBtn.disabled = false;
            submitBtn.textContent = 'Iniciar SesiÃ³n';
        }, 3000);
    });

    // Auto-limpiar mensajes despuÃ©s de 8 segundos
    const mensajes = document.querySelector('.mensajes');
    if (mensajes) {
        setTimeout(() => {
            mensajes.style.animation = 'fadeOut 0.5s ease';
            mensajes.style.opacity = '0';
            setTimeout(() => mensajes.remove(), 500);
        }, 8000);
    }
</script>
</body>
</html>